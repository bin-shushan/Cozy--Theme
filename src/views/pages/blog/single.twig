{% extends "layouts/master" %}

{% block content %}
<div class="page-blog-single">
    <div class="container">
        {# Breadcrumb #}
        <nav class="breadcrumb">
            <salla-breadcrumb></salla-breadcrumb>
        </nav>

        {# Blog Post #}
        <article class="blog-post">
            {# Post Header #}
            <header class="post-header">
                <h1 class="post-title">{{ post.title }}</h1>
                
                <div class="post-meta">
                    <span class="post-date">
                        <salla-icon name="calendar"></salla-icon>
                        {{ post.created_at|date('F d, Y') }}
                    </span>
                    
                    {% if post.author %}
                        <span class="post-author">
                            <salla-icon name="user"></salla-icon>
                            {{ post.author.name }}
                        </span>
                    {% endif %}
                    
                    {% if post.comments_count %}
                        <span class="post-comments">
                            <salla-icon name="comment"></salla-icon>
                            {{ post.comments_count }} {{ trans('common.comments') }}
                        </span>
                    {% endif %}
                </div>
            </header>

            {# Post Image #}
            {% if post.image %}
                <div class="post-image">
                    <img src="{{ post.image }}" alt="{{ post.title }}" loading="lazy">
                </div>
            {% endif %}

            {# Post Content #}
            <div class="post-content">
                {{ post.content|raw }}
            </div>

            {# Post Tags #}
            {% if post.tags %}
                <div class="post-tags">
                    <strong>{{ trans('common.tags') }}:</strong>
                    {% for tag in post.tags %}
                        <a href="{{ tag.url }}" class="tag">{{ tag.name }}</a>
                    {% endfor %}
                </div>
            {% endif %}

            {# Social Share #}
            <div class="post-share">
                <strong>{{ trans('common.share') }}:</strong>
                <salla-social-share 
                    url="{{ post.url }}"
                    title="{{ post.title }}">
                </salla-social-share>
            </div>
        </article>

        {# Comments Section #}
        <section class="comments-section">
            {% include 'components.comments' with {item: post} %}
        </section>

        {# Related Posts #}
        {% if post.related_posts %}
            <section class="related-posts section-padding">
                <h2 class="section-title">{{ trans('pages.related_posts') }}</h2>
                <div class="blog-grid">
                    {% for related_post in post.related_posts|slice(0, 3) %}
                        <article class="blog-card">
                            <div class="blog-card-inner">
                                <div class="blog-card-image">
                                    <a href="{{ related_post.url }}">
                                        <img src="{{ related_post.image }}" alt="{{ related_post.title }}" loading="lazy">
                                    </a>
                                </div>
                                <div class="blog-card-content">
                                    <h3 class="blog-title">
                                        <a href="{{ related_post.url }}">{{ related_post.title }}</a>
                                    </h3>
                                    <p class="blog-excerpt">{{ related_post.excerpt|truncate(100) }}</p>
                                </div>
                            </div>
                        </article>
                    {% endfor %}
                </div>
            </section>
        {% endif %}
    </div>
</div>
{% endblock %}


